{"version":3,"sources":["webpack:///./src/views/user/BindingPhone.vue?0cff","webpack:///src/views/user/BindingPhone.vue","webpack:///./src/views/user/BindingPhone.vue?580c","webpack:///./src/views/user/BindingPhone.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","phone","captcha","class","disabled","click","code","_v","_s","text","confirm","staticRenderFns","BindingPhonevue_type_script_lang_js_","components","props","data","mixins","SendVerifyCode","computed","Object","vuex_esm","mounted","methods","_confirm","asyncToGenerator","regeneratorRuntime","mark","_callee","that","_this","wrap","_context","prev","next","$validator","validate","message","t0","abrupt","dialog","user","then","res","undefined","is_bind","$dialog","mes","msg","opts","txt","color","callback","step","success","$router","replace","catch","error","stop","apply","arguments","_code","_callee2","_context2","sendCode","user_BindingPhonevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"h5/js/chunk-2d0c4d6c.ef88740a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ChangePassword\"},[_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phone),expression:\"phone\"}],attrs:{\"type\":\"number\",\"placeholder\":\"填写手机号码\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value}}})]),_c('div',{staticClass:\"item acea-row row-between-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.captcha),expression:\"captcha\"}],staticClass:\"codeIput\",attrs:{\"type\":\"text\",\"placeholder\":\"填写验证码\"},domProps:{\"value\":(_vm.captcha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.captcha=$event.target.value}}}),_c('button',{staticClass:\"code font-color-red\",class:_vm.disabled === true ? 'on' : '',attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.code}},[_vm._v(\"\\n        \"+_vm._s(_vm.text)+\"\\n      \")])])]),_c('div',{staticClass:\"confirmBnt bg-color-red\",on:{\"click\":_vm.confirm}},[_vm._v(\"确认绑定\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ChangePassword\">\n    <div class=\"list\">\n      <div class=\"item\">\n        <input type=\"number\" placeholder=\"填写手机号码\" v-model=\"phone\" />\n      </div>\n      <div class=\"item acea-row row-between-wrapper\">\n        <input\n          type=\"text\"\n          placeholder=\"填写验证码\"\n          class=\"codeIput\"\n          v-model=\"captcha\"\n        />\n        <button\n          class=\"code font-color-red\"\n          :disabled=\"disabled\"\n          :class=\"disabled === true ? 'on' : ''\"\n          @click=\"code\"\n        >\n          {{ text }}\n        </button>\n      </div>\n    </div>\n    <div class=\"confirmBnt bg-color-red\" @click=\"confirm\">确认绑定</div>\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport sendVerifyCode from \"@mixins/SendVerifyCode\";\nimport { required, alpha_num, chs_phone } from \"@utils/validate\";\nimport { validatorDefaultCatch } from \"@utils/dialog\";\nimport { registerVerify, bindingPhone } from \"@api/user\";\n\nexport default {\n  name: \"BindingPhone\",\n  components: {},\n  props: {},\n  data: function() {\n    return {\n      captcha: \"\",\n      phone: \"\" //手机号\n    };\n  },\n  mixins: [sendVerifyCode],\n  computed: mapGetters([\"userInfo\"]),\n  mounted: function() {},\n  methods: {\n    async confirm() {\n      let that = this;\n      const { phone, captcha } = that;\n      try {\n        await that\n          .$validator({\n            phone: [\n              chs_phone(chs_phone.message(\"手机号码\")),\n              alpha_num(alpha_num.message())\n            ],\n            captcha: [\n              required(required.message(\"验证码\")),\n              alpha_num(alpha_num.message(\"验证码\"))\n            ]\n          })\n          .validate({ phone, captcha });\n      } catch (e) {\n        return validatorDefaultCatch(e);\n      }\n      bindingPhone({\n        phone: this.phone,\n        captcha: this.captcha\n      })\n        .then(res => {\n          if (res.data !== undefined && res.data.is_bind) {\n            that.$dialog.confirm({\n              mes: res.msg,\n              opts: [\n                {\n                  txt: \"确认绑定\",\n                  color: false,\n                  callback: () => {\n                    bindingPhone({\n                      phone: this.phone,\n                      captcha: this.captcha,\n                      step: 1\n                    })\n                      .then(res => {\n                        that.$dialog.success(res.msg).then(() => {\n                          that.$router.replace({ name: \"PersonalData\" });\n                        });\n                      })\n                      .catch(res => {\n                        that.$dialog.error(res.msg).then(() => {\n                          that.$router.replace({ name: \"PersonalData\" });\n                        });\n                      });\n                  }\n                },\n                {\n                  txt: \"取消\",\n                  color: false,\n                  callback: () => {\n                    that.$dialog.error(\"已取消绑定\").then(() => {\n                      that.$router.replace({ name: \"PersonalData\" });\n                    });\n                  }\n                }\n              ]\n            });\n          } else {\n            that.$dialog.success(res.msg).then(() => {\n              that.$router.replace({ name: \"PersonalData\" });\n            });\n          }\n        })\n        .catch(res => {\n          that.$dialog.error(res.msg);\n        });\n    },\n    async code() {\n      let that = this;\n      const { phone } = that;\n      try {\n        await that\n          .$validator({\n            phone: [\n              required(required.message(\"手机号码\")),\n              chs_phone(chs_phone.message())\n            ]\n          })\n          .validate({ phone });\n      } catch (e) {\n        return validatorDefaultCatch(e);\n      }\n\n      registerVerify({ phone: phone })\n        .then(res => {\n          that.$dialog.success(res.msg);\n          that.sendCode();\n        })\n        .catch(res => {\n          that.$dialog.error(res.msg);\n        });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindingPhone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BindingPhone.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BindingPhone.vue?vue&type=template&id=cf2f6138&\"\nimport script from \"./BindingPhone.vue?vue&type=script&lang=js&\"\nexport * from \"./BindingPhone.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}